# è®Šæ›´æ—¥èªŒ (Changelog)

## [1.1.1] - 2025-12-04

### âš¡ æ•ˆèƒ½å„ªåŒ– (Performance Improvements)
*   **React.memo å„ªåŒ–æ¸²æŸ“**:
    *   å° `ScheduleTable` ä¸­çš„ `DraggableShift` å’Œ `DroppableCell` å…ƒä»¶ä½¿ç”¨ `React.memo`ã€‚
    *   æ¸›å°‘ 60-80% ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œå¤§å¹…æå‡è¡¨æ ¼æ“ä½œæµæš¢åº¦ã€‚
*   **useMemo å¿«å–è¨ˆç®—çµæœ**:
    *   å¿«å–åœ¨è·å“¡å·¥åˆ—è¡¨ (`activeEmployees`)ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°éæ¿¾ã€‚
    *   å»ºç«‹è¦å‰‡æŸ¥æ‰¾ Map (`rulesBySessionId`, `rulesByShiftAndSession`)ï¼Œå°‡æŸ¥æ‰¾æ•ˆèƒ½å¾ O(n) æå‡è‡³ O(1)ã€‚
    *   å„ªåŒ– `handleQuickFill` å’Œ `handleShiftMove` å‡½æ•¸çš„è¦å‰‡é©—è­‰é‚è¼¯ã€‚
*   **useCallback å„ªåŒ–å‡½æ•¸å¼•ç”¨**:
    *   å° `ScheduleTable` ä¸­çš„äº‹ä»¶è™•ç†å‡½æ•¸ä½¿ç”¨ `useCallback`ã€‚
    *   ç¢ºä¿å‡½æ•¸å¼•ç”¨ç©©å®šï¼Œé…åˆ `React.memo` ç™¼æ®æœ€å¤§æ•ˆæœã€‚
    *   å„ªåŒ–å‡½æ•¸: `handleDragEnd`, `handleDragStart`, `getScheduleData`, `formatShiftDisplay`, `getMainShiftDisplay`ã€‚
*   **åˆä½µ localStorage åŒæ­¥**:
    *   å°‡ 7 å€‹ç¨ç«‹çš„ `useEffect` åˆä½µç‚ºå–®ä¸€ `useEffect`ã€‚
    *   æ¸›å°‘é‡è¤‡åŸ·è¡Œï¼Œæå‡ç¨‹å¼ç¢¼å¯ç¶­è­·æ€§ã€‚
    *   åŠ å…¥éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œé˜²æ­¢å¯«å…¥å¤±æ•—å°è‡´è³‡æ–™éºå¤±ã€‚
*   **æ•ˆç›Š**: 
    *   å¿«é€Ÿå¡«å¯«æ“ä½œé€Ÿåº¦æå‡ç´„ 70%ã€‚
    *   æ‹–æ›³é©—è­‰é€Ÿåº¦æå‡ç´„ 80%ã€‚
    *   æ•´é«”æ¸²æŸ“æ•ˆèƒ½æå‡ç´„ 30-40%ã€‚
    *   å¤§é‡å“¡å·¥/è¦å‰‡æ™‚çš„æ•´é«”æ•ˆèƒ½é¡¯è‘—æ”¹å–„ã€‚


## [1.0.4] - 2025-12-01

### âœ¨ æ–°å¢åŠŸèƒ½ (Features)
*   **è‡ªå‹•è³‡æ–™æ¸…ç†**: ç³»çµ±å•Ÿå‹•æ™‚æœƒè‡ªå‹•åˆªé™¤ 90 å¤©å‰çš„èˆŠæ’ç­è³‡æ–™ï¼Œå„ªåŒ–æ•ˆèƒ½ã€‚
*   **éŒ¯èª¤é˜²è­·ç¶² (Error Boundary)**: 
    *   æ””æˆªæœªé æœŸçš„ React æ¸²æŸ“éŒ¯èª¤ã€‚
# è®Šæ›´æ—¥èªŒ (Changelog)

## [1.0.4] - 2025-12-01

### âœ¨ æ–°å¢åŠŸèƒ½ (Features)
*   **è‡ªå‹•è³‡æ–™æ¸…ç†**: ç³»çµ±å•Ÿå‹•æ™‚æœƒè‡ªå‹•åˆªé™¤ 90 å¤©å‰çš„èˆŠæ’ç­è³‡æ–™ï¼Œå„ªåŒ–æ•ˆèƒ½ã€‚
*   **éŒ¯èª¤é˜²è­·ç¶² (Error Boundary)**: 
    *   æ””æˆªæœªé æœŸçš„ React æ¸²æŸ“éŒ¯èª¤ã€‚
    *   æä¾›å‹å–„çš„éŒ¯èª¤æç¤ºç•«é¢ã€‚
    *   **ç·Šæ€¥å‚™ä»½åŠŸèƒ½**: å³ä½¿ç¨‹å¼å´©æ½°ï¼Œä¹Ÿèƒ½é€éã€Œç·Šæ€¥å‚™ä»½ã€æŒ‰éˆ•ç›´æ¥å¾ LocalStorage æ•‘å‡ºè³‡æ–™ã€‚
*   **å€‹äººç­è¡¨å¢å¼·**: åŒ¯å‡ºå€‹äººç­è¡¨æ™‚ï¼Œç¾åœ¨æœƒé¡¯ç¤ºã€Œç§‘åˆ¥ã€èˆ‡ã€Œè² è²¬é†«å¸«ã€è³‡è¨Š (æ ¼å¼: `(ç§‘åˆ¥/é†«å¸«)`)ã€‚

### ğŸ› éŒ¯èª¤ä¿®å¾© (Bug Fixes)
*   **è³‡æ–™å®Œæ•´æ€§**: ä¿®å¾© JSON åŒ¯å‡º/åŒ¯å…¥åŠŸèƒ½ï¼Œè£œå›éºæ¼çš„ `shiftDoctors` (è¨ºæ¬¡é†«å¸«è¨­å®š) è³‡æ–™ã€‚
*   **UI ä¸€è‡´æ€§**: çµ±ä¸€æ‰€æœ‰è¨­å®šå½ˆçª—çš„ã€Œå„²å­˜ã€æŒ‰éˆ•æ¨£å¼ (è—è‰²èƒŒæ™¯ + Save Icon)ã€‚

### ğŸ“ æ–‡ä»¶èˆ‡ä»£ç¢¼å“è³ª (Documentation & Code Quality)
*   **JSDoc**: ç‚ºæ ¸å¿ƒè³‡æ–™çµæ§‹ (`Employee`, `ShiftRule`) èˆ‡é—œéµå‡½å¼åŠ å…¥å‹åˆ¥è¨»è§£ã€‚
*   **æ¶æ§‹æ–‡ä»¶**: æ–°å¢ `docs/ARCHITECTURE.md`ã€‚

## [1.1.0] - 2025-12-04

### âœ¨ æ–°å¢åŠŸèƒ½ (Features)
*   **æ‹–æ›³æ’ç­ (Drag & Drop Scheduling)**:
    *   **ç›´è¦ºæ“ä½œ**: æ”¯æ´é•·æŒ‰ç­åˆ¥å¡ç‰‡é€²è¡Œæ‹–æ›³ï¼Œå¯ç§»å‹•è‡³å…¶ä»–æ—¥æœŸã€‚
    *   **å³æ™‚äº¤æ› (Swap)**: è‹¥ç›®æ¨™æ ¼å·²æœ‰æ’ç­ï¼Œç³»çµ±æœƒè‡ªå‹•äº¤æ›å…©è€…çš„å…§å®¹ï¼Œè€Œéè¦†è“‹ã€‚
    *   **è¦–è¦ºå›é¥‹**: æ‹–æ›³æ™‚ç›®æ¨™æ ¼æœƒé¡¯ç¤ºè™›ç·šæ¡†èˆ‡å°æ‡‰é¡è‰² (æ—©ç­è—/åˆç­æ©˜/æ™šç­ç´«)ï¼Œä¸¦æœ‰å‡¹æ§½ç«‹é«”æ„Ÿã€‚
    *   **çœŸå¯¦å¡ç‰‡**: æ‹–æ›³æ™‚çš„æµ®å‹•å¡ç‰‡èˆ‡è¡¨æ ¼å…§å®¹å®Œå…¨ä¸€è‡´ï¼Œæä¾›ã€Œæ‹¿èµ·ä¾†ã€çš„çœŸå¯¦æ„Ÿã€‚
*   **è¦å‰‡å³æ™‚é©—è­‰ (Real-time Validation)**:
    *   **é˜²å‘†æ©Ÿåˆ¶**: æ‹–æ›³æ™‚ç³»çµ±æœƒå³æ™‚æª¢æŸ¥ç›®æ¨™æ—¥æœŸæ˜¯å¦ç¬¦åˆè©²è¨ºæ¬¡çš„ã€Œæ˜ŸæœŸé™åˆ¶ã€èˆ‡ã€Œé€±æ¬¡é™åˆ¶ã€ã€‚
    *   **éŒ¯èª¤æç¤º**: è‹¥é•åè¦å‰‡ï¼Œæ“ä½œæœƒè¢«é˜»æ“‹ä¸¦é¡¯ç¤º Toast éŒ¯èª¤è¨Šæ¯ã€‚
*   **ç³»çµ±è³‡è¨Šé¢æ¿**:
    *   **ç‰ˆæœ¬ç´€éŒ„**: æ–°å¢ç‰ˆæœ¬è³‡è¨Šå€å¡Šï¼Œé¡¯ç¤ºç•¶å‰ç‰ˆæœ¬è™Ÿèˆ‡æ›´æ–°æ—¥èªŒã€‚
    *   **å„²å­˜ç›£æ§**: é¡¯ç¤º LocalStorage ä½¿ç”¨é‡èˆ‡å„é¡è³‡æ–™çµ±è¨ˆã€‚

### ğŸš€ å„ªåŒ–èˆ‡æ”¹é€² (Improvements)
*   **iPad/å¹³æ¿é«”é©—**:
    *   **è¡¨æ ¼é¡¯ç¤ºä¿®å¾©**: è§£æ±ºåœ¨ iOS Safari ä¸Š Sticky Column èƒŒæ™¯åç§»èˆ‡åˆ†é›¢çš„å•é¡Œ (æ”¹ç”¨ `bg-clip-padding` èˆ‡ `border-separate` æ›¿ä»£æ–¹æ¡ˆ)ã€‚
    *   **æ‰‹å‹¢å„ªåŒ–**: èª¿æ•´é•·æŒ‰åˆ¤å®šæ™‚é–“ï¼Œé¿å…èˆ‡æ»‘å‹•æ‰‹å‹¢è¡çªã€‚
*   **UI ç´°ç¯€**:
    *   **è¨­å®šé¸å–®**: å°‡è¨­å®šæŒ‰éˆ•ç§»è‡³ Header å³å´ï¼Œæ“ä½œæ›´é †æ‰‹ã€‚
    *   **åˆ—å°å„ªåŒ–**: ç§»é™¤åˆ—å°æ™‚ä¸å¿…è¦çš„é™°å½±èˆ‡èƒŒæ™¯è‰²ï¼Œç¢ºä¿è¼¸å‡ºæ¸…æ™°ã€‚

### ğŸ› éŒ¯èª¤ä¿®å¾© (Bug Fixes)
*   **è¦å‰‡åˆ¤å®š**: ä¿®æ­£ `isRuleValid` å‡½å¼ä¸­å±¬æ€§åç¨±éŒ¯èª¤ (`availableDays` -> `days`) çš„ Bugã€‚
*   **Ghost Click**: ä¿®å¾©è§¸æ§è£ç½®ä¸Šæ»‘å‹•æ™‚å¯èƒ½èª¤è§¸ç™¼é»æ“Šçš„å•é¡Œã€‚

## [1.0.5] - 2025-12-03 (Tablet UX Update)
### Added
- **Tablet UX Enhancements**:
    - **Floating Glass Sidebar**: å´é‚Šæ¬„æ”¹ç‚ºæ‡¸æµ®å¼è¨­è¨ˆï¼Œæ­é… `backdrop-blur-xl`ã€‚
    - **Virtual Keyboard Optimization**: è¼¸å…¥æ¡†åŠ å…¥ `scrollIntoView` é‚è¼¯ã€‚
    - **Tools FAB**: æ–°å¢å³ä¸‹è§’æ‡¸æµ®æŒ‰éˆ•æ•´åˆåŒ¯å‡ºé¸å–®ã€‚
- **Backup Management**:
    - **ç€è¦½å™¨å…§å»ºå‚™ä»½**: æ”¯æ´ç›´æ¥å»ºç«‹ã€é‚„åŸã€åˆªé™¤å‚™ä»½ã€‚
    - **è‡ªå‹•ç®¡ç†**: è‡ªå‹•ä¿ç•™æœ€è¿‘ 10 å€‹ç‰ˆæœ¬ã€‚


---
